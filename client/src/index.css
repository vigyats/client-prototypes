@import url("https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,500,650,750&family=Hind:wght@400;500;600;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;
@keyframes spin-ring { to { transform: rotate(360deg); } }
@keyframes bounce-dots { 
  0%, 80%, 100% { transform: scale(0); } 
  40% { transform: scale(1); } 
}
.tricolour-ring {
  width: 80px; height: 80px; 
  border: 4px solid hsl(var(--tri-saffron)/0.2)); 
  border-top-color: hsl(var(--tri-saffron)); 
  border-radius: 9999px; 
  animation: spin-ring 1s linear infinite;
}
.tricolour-loader { display: flex; gap: 0.5rem; }
.dot { width: 0.75rem; height: 0.75rem; border-radius: 9999px; }
.dot-saffron { 
  background-color: hsl(var(--tri-saffron)); 
  animation: bounce-dots 1.4s ease-in-out infinite; 
  animation-delay: -0.32s; 
}
.dot-white { 
  background-color: white; 
  animation: bounce-dots 1.4s ease-in-out infinite; 
  animation-delay: -0.16s; 
}
.dot-green { 
  background-color: hsl(var(--tri-green)); 
  animation: bounce-dots 1.4s ease-in-out infinite; 
}

/* =========================================================
   Premium NGO/Gov aesthetic â€” tricolour accents, navy text
   ========================================================= */
:root {
  --font-sans: "Hind", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  --font-display: "Fraunces", ui-serif, Georgia, serif;

  /* Core neutrals */
  --background: 210 25% 98%;
  --foreground: 222 45% 13%;
  --muted: 210 25% 95%;
  --muted-foreground: 220 18% 42%;
  --border: 214 25% 88%;
  --input: 214 25% 86%;
  --ring: 215 85% 42%;

  --card: 0 0% 100%;
  --card-foreground: 222 45% 13%;
  --card-border: 214 25% 90%;

  --popover: 0 0% 100%;
  --popover-foreground: 222 45% 13%;
  --popover-border: 214 25% 90%;

  /* Primary: deep navy */
  --primary: 215 85% 34%;
  --primary-foreground: 210 40% 98%;

  /* Secondary: soft slate */
  --secondary: 214 32% 93%;
  --secondary-foreground: 222 45% 13%;

  --accent: 196 85% 38%;
  --accent-foreground: 210 40% 98%;

  --destructive: 0 84% 56%;
  --destructive-foreground: 210 40% 98%;

  /* Tricolour accents (subtle usage) */
  --tri-saffron: 29 92% 56%;
  --tri-white: 0 0% 100%;
  --tri-green: 145 68% 34%;
  --tri-navy: 218 74% 28%;
  --tri-blue: 219 112% 147%;
  --shadow-color: 222 45% 13%;
  --radius: 0.9rem;

  --shadow-sm: 0 1px 2px hsl(var(--shadow-color) / 0.06), 0 1px 1px hsl(var(--shadow-color) / 0.03);
  --shadow-md: 0 10px 25px hsl(var(--shadow-color) / 0.08), 0 2px 6px hsl(var(--shadow-color) / 0.06);
  --shadow-lg: 0 18px 55px hsl(var(--shadow-color) / 0.12), 0 6px 18px hsl(var(--shadow-color) / 0.08);
}

.dark {
  --background: 222 42% 10%;
  --foreground: 210 40% 98%;
  --muted: 222 34% 14%;
  --muted-foreground: 215 16% 70%;
  --border: 216 24% 18%;
  --input: 216 24% 18%;
  --card: 222 34% 12%;
  --card-foreground: 210 40% 98%;
  --card-border: 216 24% 18%;
  --popover: 222 34% 12%;
  --popover-foreground: 210 40% 98%;
  --popover-border: 216 24% 18%;

  --primary: 214 92% 60%;
  --primary-foreground: 222 42% 10%;

  --secondary: 222 34% 14%;
  --secondary-foreground: 210 40% 98%;
  --accent: 194 95% 44%;
  --accent-foreground: 222 42% 10%;

  --shadow-color: 0 0% 0%;
}

* {
  color-scheme: dark;
}

@layer base {
  html {
    color-scheme: light;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  .dark html {
    color-scheme: dark;
  }

  * {
    @apply border-border;
    transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-sans);
    letter-spacing: 0.01em;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    @apply tracking-tight;
  }
}

/* Background texture + subtle tri glow */
@layer utilities {
  .bg-heritage {
    background:
      radial-gradient(1200px 600px at 18% 12%, hsl(var(--tri-saffron) / 0.08), transparent 55%),
      radial-gradient(1000px 520px at 78% 18%, hsl(var(--tri-navy) / 0.08), transparent 52%),
      radial-gradient(1000px 520px at 60% 92%, hsl(var(--tri-green) / 0.08), transparent 52%),
      linear-gradient(180deg, hsl(var(--background)) 0%, hsl(var(--background)) 100%);
  }

  .grain::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: 0.06;
    mix-blend-mode: multiply;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='240' height='240' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  }

  .glass {
    background: hsl(var(--card) / 0.72);
    border: 1px solid hsl(var(--border) / 0.7);
    box-shadow: var(--shadow-md);
    backdrop-filter: blur(10px);
  }

  .flag-border {
    position: relative;
  }
  .flag-border::after {
    content: "";
    position: absolute;
    inset: auto 1rem 0 1rem;
    height: 3px;
    background: linear-gradient(
      90deg,
      hsl(var(--tri-saffron)) 0%,
      hsl(var(--tri-saffron)) 33%,
      hsl(var(--tri-white)) 33%,
      hsl(var(--tri-white)) 66%,
      hsl(var(--tri-green)) 66%,
      hsl(var(--tri-green)) 100%
    );
    opacity: 0.9;
    box-shadow: 0 4px 12px rgba(255, 153, 51, 0.3), 0 4px 12px rgba(19, 136, 8, 0.3);
  }

  .focus-premium {
    @apply focus:outline-none focus:ring-4;
    --tw-ring-color: hsl(var(--ring) / 0.18);
  }

  .ease-premium {
    transition: all 260ms cubic-bezier(.2,.8,.2,1);
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeUp {
    animation: fadeUp 520ms cubic-bezier(.2,.8,.2,1) both;
  }

  @keyframes flagWave {
    0%, 100% { transform: translateY(0) scaleY(1); }
    50% { transform: translateY(-2px) scaleY(1.02); }
  }
  .flag-wave {
    animation: flagWave 3s ease-in-out infinite;
  }

  @keyframes flagFlow {
    0%, 20% { background-position: 50% 50%; }
    45%, 55% { background-position: 30% 50%; }
    80%, 100% { background-position: 50% 50%; }
  }
  .flag-flow {
    background-size: 150% 100%;
    animation: flagFlow 10s ease-in-out infinite;
  }

  @keyframes triSweep {
    0% { transform: translateX(-30%); opacity: .6; }
    50% { opacity: 1; }
    100% { transform: translateX(30%); opacity: .6; }
  }
  .tri-sweep {
    animation: triSweep 900ms ease-in-out infinite;
  }

  @keyframes shimmer {
    0% { background-position: 0% 50%; }
    100% { background-position: 120% 50%; }
  }
  .shimmer {
    background-size: 200% 200%;
    animation: shimmer 1.15s ease-in-out infinite;
  }

  /* Performance optimizations */
  .will-change-transform {
    will-change: transform;
  }
  
  @media (prefers-reduced-motion: reduce) {
    .animate-fadeUp,
    .flag-wave,
    .tri-sweep,
    .shimmer {
      animation: none;
    }
  }
}

/* Tiptap typography */
.ProseMirror {
  @apply outline-none leading-relaxed;
}
.ProseMirror p {
  @apply text-[15px] md:text-[16px] leading-relaxed text-foreground/90;
}
.ProseMirror h2 {
  @apply text-xl md:text-2xl mt-6 mb-2;
}
.ProseMirror h3 {
  @apply text-lg md:text-xl mt-5 mb-2;
}
.ProseMirror ul {
  @apply list-disc pl-5 my-3;
}
.ProseMirror ol {
  @apply list-decimal pl-5 my-3;
}
.ProseMirror a {
  @apply underline underline-offset-4;
  color: hsl(var(--primary));
}
.ProseMirror blockquote {
  @apply border-l-4 pl-4 my-4 italic;
  border-color: hsl(var(--tri-saffron) / .55);
  color: hsl(var(--muted-foreground));
}
